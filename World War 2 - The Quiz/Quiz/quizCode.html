<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="quiz.css" />
    <script type="text/javascript" src="quizCode.js"></script>
    <title>World War 2 - The Quiz - Quiz</title>
  </head>

  <body>
    <h1>Quiz</h1>
    <div id="quiz"></div>
    <br />
    <br />
    <button id="finishButton" class="center">Finish</button>
    <div id="results"></div>
  </body>

  <script>
    function quiz(questions, quizC) {
      function showQuestions(questions, quizC) {
        var output = [];
        var answers;

        for (var i = 0; i < questions.length; i++) {
          answers = [];

          for (letter in questions[i].answers) {
            answers.push(
              "<label>" +
                '<input type="radio" name="question' +
                i +
                '" value="' +
                letter +
                '">' +
                letter +
                ": " +
                questions[i].answers[letter] +
                "</label>"
            );
          }

          output.push(
            '<div class="question">' +
              questions[i].question +
              "</div>" +
              '<div class="answers">' +
              answers.join("") +
              "</div>"
          );
        }

        quizC.innerHTML = output.join("");
      }

      function showResults(questions, quizC, resultsC) {
        var answerContainers = quizC.querySelectorAll(".answers");
        var userAnswer = "";
        var numCorrect = 0;

        for (var i = 0; i < questions.length; i++) {
          userAnswer = (
            answerContainers[i].querySelector(
              "input[name = question" + i + "]:checked"
            ) || {}
          ).value;

          if (userAnswer === questions[i].correctAnswer) {
            numCorrect++;

            answerContainers[i].style.color = "lightgreen";
          } else {
            answerContainers[i].style.color = "red";
          }
        }

        resultsC.innerHTML = numCorrect + " out of " + questions.length;
      }

      function finishFunc() {
        alert("Now in finishFunc function!");
        showResults(questions, quizC, resultsC);
      }

      showQuestions(questions, quizC);

      document
        .getElementById("finishButton")
        .addEventListener("click", finishFunc);

      finishButton.onClick = function () {
        showResults(questions, quizC, resultsC);
      };
    }

    //example data for questions array
    const questions = [
      {
        question: "First question",
        answers: {
          A: "answer 1",
          B: "answer 2",
          C: "answer 3",
        },
      },
      {
        question: "Second question",
        answers: {
          A: "answer 1",
          B: "answer 2",
          C: "answer 3",
        },
      },
      {
        question: "Thrid question",
        answers: {
          A: "answer 1",
          B: "answer 2",
          C: "answer 3",
        },
      },
    ];

    //here calling the function that defines showQuestions and showResults
    quiz(questions, document.getElementById("quiz"));
  </script>
</html>
